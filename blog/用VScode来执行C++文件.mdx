---
title: 用VScode来编译C++
description: Compile with VScode
authors: bear
date: 2023-07-19T21:00
tags: [VScode, C++]
image: https://s2.loli.net/2023/07/15/cwH2OBANpZXLmTM.png
hide_table_of_contents: false
---

## 一、前提
vscode只是一个文本编辑器，需要编译器才能编译C++文件，这里用的是官网推荐的
1. MinGW
2. gdb debugger 
3. C++ 扩展插件。
## 二、创建新文件

## 三、task.json
vscode在编译C++文件的时候，C++插件会自动创建`task.json`，这个`json`文件中包含的内容是：编译器编译时的配置，详细的内容可以查看[**官方文档**](https://code.visualstudio.com/docs/cpp/config-mingw#_run-helloworldcpp)
```javascript
{
    "tasks": [
        {
            "type": "cppbuild",
            "label": "C/C++: g++.exe build and debug active file",
            //The command setting specifies the program to run; in this case that is g++.
            "command": "D:\\MSYS2\\mingw64\\bin\\g++.exe",
            /*The args array specifies the command-line arguments that will be passed to g++. These arguments must be specified in the order expected by the compiler.*/
            "args": [
                "-fdiagnostics-color=always",
                "-g",
                "${file}",
                "-o",
                "${fileDirname}\\${fileBasenameNoExtension}.exe"
            ],
            "options": {
                "cwd": "${fileDirname}"
            },
            "problemMatcher": [
                "$gcc"
            ],
            "group": {
                "kind": "build",
                "isDefault": true
            },
            /*The detail value is what you will as the description of the task in the tasks list. It's highly recommended to rename this value to differentiate it from similar tasks.*/
            "detail": "Task generated by Debugger."
        }
    ],
    "version": "2.0.0"
}
```

## 四、debug文件
vscode可以设置断点，查看监视来进行debug。[**详情**](https://code.visualstudio.com/docs/cpp/config-mingw#_explore-the-debugger)

同时还可以自定义debug的配置，在debug时会自动创建`launch.json`文件，这里面包含了debug的配置，[**官方文档**](https://code.visualstudio.com/docs/cpp/config-mingw#_customize-debugging-with-launchjson)
```javascript title="launch.json"
{
    // Use IntelliSense to learn about possible attributes.
    // Hover to view descriptions of existing attributes.
    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
    "version": "0.2.0",
    "configurations": [
        {
            "name": "(gdb) Launch",
            "type": "cppdbg",
            "request": "launch",
            "program": "enter program name, for example ${workspaceFolder}/a.exe",
            "args": [],
            "stopAtEntry": false,
            "cwd": "${fileDirname}",
            "environment": [],
            "externalConsole": false,
            "MIMode": "gdb",
            "miDebuggerPath": "/path/to/gdb",
            "setupCommands": [
                {
                    "description": "Enable pretty-printing for gdb",
                    "text": "-enable-pretty-printing",
                    "ignoreFailures": true
                },
                {
                    "description": "Set Disassembly Flavor to Intel",
                    "text": "-gdb-set disassembly-flavor intel",
                    "ignoreFailures": true
                }
            ]
        },
    ]
}
```

## 五、配置C++插件
可以通过修改`c_cpp_properties.json`这个文件来修改C++插件配置，也可以通过UI界面来修改（下面是UI界面修改步骤）：
1. 通过命令行查找`C/C++: Edit configurations(UI)`
2. 按下enter，进入UI配置界面
3. 在界面中修改内容，Vscode会把这些修改自动添加到`c_cpp_properties`中去
[**详情**](https://code.visualstudio.com/docs/cpp/config-mingw#_cc-configurations)


## 附录：官方文档
[**Vscode官方文档**](https://code.visualstudio.com/docs/cpp/config-mingw#_prerequisites)